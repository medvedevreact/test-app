"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{4085:(e,t,r)=>{r.d(t,{$:()=>o});var a=r(5155),i=r(2115),n=r(4707),l=r(652),s=r(9602),d=r(7594);let c=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md active:translate-y-[1px] text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 disabled:bg-gray-500",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-primary text-primary bg-transparent hover:bg-secondary",secondary:"bg-secondary text-primary hover:bg-secondary/50",ghost:"hover:bg-secondary hover:text-secondary-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=i.forwardRef((e,t)=>{let{className:r,variant:i,size:l,asChild:o=!1,children:u,disabled:m,loading:p,...x}=e,g=o?n.DX:"button";return(0,a.jsx)(g,{disabled:m||p,className:(0,s.cn)(c({variant:i,size:l,className:r})),ref:t,...x,children:p?(0,a.jsx)(d.A,{className:"w-5 h-5 animate-spin"}):u})});o.displayName="Button"},5786:(e,t,r)=>{r.d(t,{A:()=>a});let a=r(2651).A.create({baseURL:"http://localhost:3000/api"})},9602:(e,t,r)=>{r.d(t,{cn:()=>n});var a=r(3463),i=r(9795);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.QP)((0,a.$)(t))}},5722:(e,t,r)=>{r.d(t,{W:()=>g});var a=r(5155),i=r(2115),n=r(9602);let l=e=>{let{imageUrl:t,size:r,className:i}=e;return(0,a.jsxs)("div",{className:(0,n.cn)("flex items-center justify-center flex-1 relative w-full",i),children:[(0,a.jsx)("img",{src:t,alt:"Logo",className:(0,n.cn)("relative left-2 top-2 transition-all z-10 duration-300",{"w-[300px] h-[300px]":20===r,"w-[400px] h-[400px]":30===r,"w-[500px] h-[500px]":40===r})}),(0,a.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 border-dashed border-2 rounded-full border-gray-200 w-[450px] h-[450px]"}),(0,a.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 border-dotted border-2 rounded-full border-gray-100 w-[370px] h-[370px]"})]})};var s=r(7501),d=r(4085);let c=e=>{let{items:t,onClick:r,className:i,value:l}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i,"flex justify-between bg-[#F3F3F7] rounded-3xl p-1 select-none"),children:t.map(e=>(0,a.jsx)("button",{onClick:()=>null==r?void 0:r(e.value),className:(0,n.cn)("flex items-center justify-center cursor-pointer h-[30px] px-5 flex-1 rounded-3xl transition-all duration-400 text-sm",{"bg-white shadow":e.value===l,"text-gray-500 opacity-50 pointer-events-none":e.disabled}),children:e.name},e.name))})},o=(0,r(7401).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),u=e=>{let{className:t,active:r,price:i,name:l,imageUrl:s,onClick:d}=e;return(0,a.jsxs)("div",{className:(0,n.cn)("flex items-center flex-col p-1 rounded-md w-32 text-center relative cursor-pointer shadow-md bg-white",{"border border-primary":r},t),onClick:d,children:[r&&(0,a.jsx)(o,{className:"absolute top-2 right-2 text-primary"}),(0,a.jsx)("img",{width:110,height:110,src:s}),(0,a.jsx)("span",{className:"text-xs mb-1",children:l}),(0,a.jsxs)("span",{className:"font-bold",children:[i," ₽"]})]})};var m=r(6046);let p=[{name:"Маленькая",value:"20"},{name:"Средняя",value:"30"},{name:"Большая",value:"40"}],x=[{name:"Традиционное",value:"1"},{name:"Тонкое",value:"2"}],g=e=>{var t,r,o;let{className:g,items:y,imageUrl:f,ingredients:h,name:v,onAddToCart:b}=e,[z,j]=(0,i.useState)("20"),[w,N]=(0,i.useState)("1"),[I,k]=(0,i.useState)([]),[C,q]=(0,i.useState)(x);(0,m.useRouter)(),(0,i.useEffect)(()=>{(()=>{var e;let t=x.map(e=>({...e,disabled:!y.some(t=>t.pizzaType==e.value&&t.size==z)}));if(q(t),null===(e=t.find(e=>e.value==w))||void 0===e?void 0:e.disabled){let e=t.find(e=>!e.disabled);e&&N(e.value)}})()},[z,y,w]);let U=null===(t=y.find(e=>e.pizzaType==w&&e.size==z))||void 0===t?void 0:t.price,A=h.filter(e=>I.includes(e.id)).reduce((e,t)=>e+t.price,0),S="".concat(z," см, ").concat(null===(r=x.find(e=>e.value==w))||void 0===r?void 0:r.name," тесто"),E=e=>{k(t=>t.includes(e)?t.filter(t=>t!=e):[...t,e])},T=null===(o=y.find(e=>e.pizzaType==w&&e.size==z))||void 0===o?void 0:o.id,F=async()=>{await b(T,I)};return console.log(I),(0,a.jsxs)("div",{className:(0,n.cn)(g,"flex flex-1"),children:[(0,a.jsx)("div",{className:"flex items-center justify-center flex-1 relative w-full",children:(0,a.jsx)(l,{imageUrl:f,size:Number(z)})}),(0,a.jsxs)("div",{className:"w-[490px] bg-gray-100 p-7 h-[100%]",children:[(0,a.jsx)(s.h,{text:v,size:"md",className:"font-extrabold mb-1"}),(0,a.jsx)("p",{className:"text-gray-400 mb-6",children:S}),(0,a.jsx)(c,{items:p,onClick:j,value:z,className:"mb-2"}),(0,a.jsx)(c,{items:C,onClick:N,value:w,className:"mb-2"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3 mb-6",children:h.map(e=>(0,a.jsx)(u,{imageUrl:e.imageUrl,name:e.name,price:e.price,active:I.includes(e.id),onClick:()=>E(e.id)},e.id))}),(0,a.jsxs)(d.$,{className:"h-[55px] px-10 text-base rounded-[18px] w-full mt-6",onClick:F,children:["Добавить в корзину за ",U+A," ₽"]})]})]})}},5633:(e,t,r)=>{r.d(t,{J:()=>d});var a=r(5155);r(2115);var i=r(9602),n=r(7501),l=r(4085),s=r(6046);let d=e=>{let{className:t,name:r,items:d,imageUrl:c,id:o,onAddToCart:u}=e;(0,s.useRouter)();let m=async()=>{await u(d[0].id)};return(0,a.jsxs)("div",{className:(0,i.cn)(t,"flex flex-1"),children:[(0,a.jsx)("div",{className:"flex items-center justify-center flex-1 relative w-full",children:(0,a.jsx)("img",{src:c,alt:r,className:"relative left-2 top-2 transition-all z-10 duration-300 w-[350px] h-[350px]"})}),(0,a.jsxs)("div",{className:"w-[490px] bg-gray-100 p-7 h-[100%] flex flex-col justify-between",children:[(0,a.jsx)(n.h,{text:r,size:"md",className:"font-extrabold mb-1"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Отличный товар, выбор настоящего мужчины или женщины :3"}),(0,a.jsxs)(l.$,{onClick:m,className:"h-[55px] px-10 text-base rounded-[18px] w-full mt-10",children:["Добавить в корзину за ",350," ₽"]})]})]})}},7501:(e,t,r)=>{r.d(t,{h:()=>n});var a=r(3463),i=r(2115);let n=e=>{let{text:t,size:r="sm",className:n}=e;return i.createElement({xs:"h5",sm:"h4",md:"h3",lg:"h2",xl:"h1","2xl":"h1"}[r],{className:(0,a.A)({xs:"text-[16px]",sm:"text-[22px]",md:"text-[26px]",lg:"text-[32px]",xl:"text-[40px]","2xl":"text-[48px]"}[r],n)},t)}},5128:(e,t,r)=>{r.d(t,{x:()=>d});var a=r(5786);let i=async()=>{try{return(await a.A.get("/cart")).data}catch(e){console.log("Error fetching data:",e)}},n=async(e,t)=>{try{return(await a.A.patch("/cart/".concat(e),{quantity:t})).data}catch(e){console.log("Error updating cart item quantity:",e)}},l=async e=>{try{return(await a.A.delete("/cart/".concat(e))).data}catch(e){console.log("Error removing cart item:",e)}},s=async(e,t)=>{try{return(await a.A.post("/cart",{productItemId:e,ingredients:t})).data}catch(e){console.log("Error adding item to cart:",e)}},d=(0,r(9827).v)((e,t)=>({items:[],error:!1,loading:!0,totalAmount:0,fetchCartItems:async()=>{try{e({loading:!0,error:!1});let t=(await i()).items.map(e=>{let t=e.ingredients.reduce((e,t)=>e+t.price,0),r=(e.productItem.price+t)*e.quantity;return{id:e.id,quantity:e.quantity,name:e.productItem.product.name,imageUrl:e.productItem.product.imageUrl,price:r,pizzaSize:e.productItem.size,type:e.productItem.pizzaType,ingredients:e.ingredients}}),r=t.reduce((e,t)=>e+t.price,0);e({items:t,totalAmount:r})}catch(t){console.log(t),e({error:!0})}finally{e({loading:!1})}},removeCartItem:async t=>{try{e({loading:!0,error:!1});let r=(await l(t.toString())).items.map(e=>{let t=e.ingredients.reduce((e,t)=>e+t.price,0),r=(e.productItem.price+t)*e.quantity;return{id:e.id,quantity:e.quantity,name:e.productItem.product.name,imageUrl:e.productItem.product.imageUrl,price:r,pizzaSize:e.productItem.size,type:e.productItem.pizzaType,ingredients:e.ingredients}}),a=r.reduce((e,t)=>e+t.price,0);e({items:r,totalAmount:a})}catch(t){console.log(t),e({error:!0})}finally{e({loading:!1})}},updateItemQuantity:async(t,r)=>{try{e({loading:!0,error:!1});let a=(await n(t.toString(),r)).items.map(e=>{let t=e.ingredients.reduce((e,t)=>e+t.price,0),r=(e.productItem.price+t)*e.quantity;return{id:e.id,quantity:e.quantity,name:e.productItem.product.name,imageUrl:e.productItem.product.imageUrl,price:r,pizzaSize:e.productItem.size,type:e.productItem.pizzaType,ingredients:e.ingredients}}),i=a.reduce((e,t)=>e+t.price,0);e({items:a,totalAmount:i})}catch(t){console.log(t),e({error:!0})}finally{e({loading:!1})}},addCartItem:async t=>{try{e({loading:!0,error:!1});let r=(await s(t.productItemId,t.ingredients)).items.map(e=>{let t=e.ingredients.reduce((e,t)=>e+t.price,0),r=(e.productItem.price+t)*e.quantity;return{id:e.id,quantity:e.quantity,name:e.productItem.product.name,imageUrl:e.productItem.product.imageUrl,price:r,pizzaSize:e.productItem.size,type:e.productItem.pizzaType,ingredients:e.ingredients}}),a=r.reduce((e,t)=>e+t.price,0);e({items:r,totalAmount:a})}catch(t){console.log(t),e({error:!0})}finally{e({loading:!1})}}}))}}]);
exports.id=914,exports.ids=[914],exports.modules={78453:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"40104ba4260988b62e2bd259e9766a8cafed8eded8":()=>x,"40eb6bcbc513061ec6f8213df1ba54ca5fb9a46eed":()=>f});var s=r(21590);r(70376);var a=r(24785);async function i(e){let{data:t}=await a.A.post("https://api.yookassa.ru/v3/payments/",{amount:{value:e.amount.toString(),currency:"RUB"},capture:!0,description:e.description,metadata:{order_id:e.orderId},confirmation:{type:"redirect",return_url:process.env.YOOKASSA_CALLBACK_URL}},{auth:{username:process.env.YOOKASSA_STORE_ID,password:process.env.YOOKASSA_API_KEY},headers:{"Content-Type":"application/json","Idempotence-Key":Math.random().toString(36).substring(7)}});return t}var n=r(61769);let o=async(e,t,r)=>{let s=new n.u("re_NuGnvtgH_3k6Spi997u7q481hdhK5iXtB"),{data:a,error:i}=await s.emails.send({from:"onboarding@resend.dev",to:e,subject:t,text:"",react:r});if(console.log(a),i)throw i;return a};var l=r(96330);let d=globalThis.prismaGlobal??new l.PrismaClient;var c=r(89765);r(23346);let m=({orderId:e,totalAmount:t,paymentUrl:r})=>(0,c.jsxs)("div",{children:[(0,c.jsxs)("h1",{children:["Заказ #",e]}),(0,c.jsxs)("p",{children:["Оплатите заказ на сумму ",(0,c.jsxs)("b",{children:[t," ₽"]}),". Перейдите"," ",(0,c.jsx)("a",{href:r,children:"по этой ссылке"})," для оплаты заказа."]})]}),u=({code:e})=>(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{children:["Код подтверждения: ",(0,c.jsx)("h2",{children:e})]}),(0,c.jsx)("p",{children:(0,c.jsx)("a",{href:`http://localhost:3000/api/auth/verify?code=${e}`,children:"Подтвердить регистрацию"})})]});var p=r(5486),h=r(42385);async function x(e){try{let t=(0,h.UL)(),r=(await t).get("cartToken")?.value;if(!r)throw Error("Cart token not found");let s=await d.cart.findFirst({include:{user:!0,items:{include:{ingredients:!0,productItem:{include:{product:!0}}}}},where:{token:r}});if(!s)throw Error("Cart not found");if(s?.items.length===0)throw Error("Cart is empty");let a=await d.order.create({data:{token:r,fullName:e.firstName+" "+e.lastName,email:e.email,phone:e.phone,address:e.address,comment:e.comment,totalAmount:s.totalAmount,status:l.OrderStatus.PENDING,items:JSON.stringify(s.items)}});await d.cart.update({where:{id:s.id},data:{totalAmount:0}}),await d.cartItem.deleteMany({where:{cartId:s.id}});let n=(await i({amount:100,orderId:a.id,description:"Оплата заказа #"+a.id})).confirmation.confirmation_url;return o(e.email,"Оплатите заказ # "+a.id,m({orderId:a.id,totalAmount:a.totalAmount,paymentUrl:n})),n}catch(e){console.log(e)}}async function f(e){try{let t=await d.user.findFirst({where:{email:e.email}});if(t){if(!t.verified)throw Error("Почта не подтверждена");throw Error("Пользователь уже существует")}let r=await d.user.create({data:{fullName:e.fullName,email:e.email,password:(0,p.hashSync)(e.password,10)}}),s=Math.floor(1e5+9e5*Math.random()).toString();await d.verificationCode.create({data:{code:s,userId:r.id}}),await o(r.email,"Next Pizza / \uD83D\uDCDD Подтверждение регистрации",u({code:s}))}catch(e){throw console.log("Error [CREATE_USER]",e),e}}(0,r(99344).D)([x,f]),(0,s.A)(x,"40104ba4260988b62e2bd259e9766a8cafed8eded8",null),(0,s.A)(f,"40eb6bcbc513061ec6f8213df1ba54ca5fb9a46eed",null)},53197:(e,t,r)=>{Promise.resolve().then(r.bind(r,61441))},461:(e,t,r)=>{Promise.resolve().then(r.bind(r,81445))},87988:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,13219,23)),Promise.resolve().then(r.t.bind(r,34863,23)),Promise.resolve().then(r.t.bind(r,25155,23)),Promise.resolve().then(r.t.bind(r,40802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,48530,23)),Promise.resolve().then(r.t.bind(r,88921,23))},64020:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,66959,23)),Promise.resolve().then(r.t.bind(r,33875,23)),Promise.resolve().then(r.t.bind(r,88903,23)),Promise.resolve().then(r.t.bind(r,57174,23)),Promise.resolve().then(r.t.bind(r,84178,23)),Promise.resolve().then(r.t.bind(r,87190,23)),Promise.resolve().then(r.t.bind(r,61365,23))},87021:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var s=r(45512),a=r(58009),i=r(76660),n=r(32101),o=r(59462),l=r(6766);let d=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md active:translate-y-[1px] text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 disabled:bg-gray-500",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-primary text-primary bg-transparent hover:bg-secondary",secondary:"bg-secondary text-primary hover:bg-secondary/50",ghost:"hover:bg-secondary hover:text-secondary-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,children:n,disabled:c,loading:m,...u},p)=>{let h=a?i.DX:"button";return(0,s.jsx)(h,{disabled:c||m,className:(0,o.cn)(d({variant:t,size:r,className:e})),ref:p,...u,children:m?(0,s.jsx)(l.A,{className:"w-5 h-5 animate-spin"}):n})});c.displayName="Button"},25409:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var s=r(45512),a=r(58009),i=r(59462);let n=a.forwardRef(({className:e,type:t,...r},a)=>(0,s.jsx)("input",{type:t,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...r}));n.displayName="Input"},29466:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=r(85668).A.create({baseURL:"http://localhost:3000/api"})},59462:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(82281),a=r(94805);function i(...e){return(0,a.QP)((0,s.$)(e))}},95911:(e,t,r)=>{"use strict";r.d(t,{Header:()=>Q});var s=r(45512),a=r(58009),i=r(59462);let n=({className:e,children:t})=>(0,s.jsx)("div",{className:(0,i.cn)("mx-auto max-w-[1280px]",e),children:t});var o=r(45103),l=r(87021),d=r(44098),c=r(28531),m=r.n(c),u=r(71281),p=r.n(u),h=r(29466);let x=async e=>{try{return(await h.A.get("/products",{params:{query:e}})).data}catch(e){throw console.error("Error fetching data:",e),e}},f=({className:e})=>{let[t,r]=(0,a.useState)(""),[n,o]=(0,a.useState)([]),l=(0,a.useMemo)(()=>p()(async e=>{try{let t=await x(e);o(t)}catch(e){console.error("Error fetching data:",e)}},500),[]);return(0,a.useEffect)(()=>(t?l(t):o([]),()=>{l.cancel()}),[t,l]),(0,s.jsxs)("div",{className:(0,i.cn)("w-full max-w-[600px] relative z-20",e),children:[(0,s.jsx)("input",{type:"text",className:"h-[40px] bg-gray-100 pl-4 w-full rounded-md outline-none z-20 relative",placeholder:"Введите название...",value:t,onChange:e=>{r(e.target.value)}}),t&&n?.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-19"}),(0,s.jsx)("ul",{className:"absolute left-0 right-0 top-full mt-2 bg-white border border-gray-200 rounded-md shadow-md z-20",children:n.map(e=>(0,s.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 flex items-center gap-4 cursor-pointer rounded-sm",children:[(0,s.jsx)("img",{className:"w-[40px]",src:e.imageUrl,alt:""}),(0,s.jsx)("p",{children:e.name})]},e.id))})]})]})};var g=r(76228),y=r(32101),b=r(44269);let v=g.bL,j=g.l9;g.bm;let w=g.ZL,N=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(g.hJ,{className:(0,i.cn)("fixed inset-0 z-40 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));N.displayName=g.hJ.displayName;let S=(0,y.F)("fixed z-50 gap-4 bg-white p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),z=a.forwardRef(({side:e="right",className:t,children:r,...a},n)=>(0,s.jsxs)(w,{children:[(0,s.jsx)(N,{}),(0,s.jsxs)(g.UC,{ref:n,className:(0,i.cn)(S({side:e}),t),...a,children:[(0,s.jsxs)(g.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(b.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]}),r]})]}));z.displayName=g.UC.displayName;let I=({className:e,...t})=>(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});I.displayName="SheetHeader";let A=({className:e,...t})=>(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});A.displayName="SheetFooter";let C=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(g.hE,{ref:r,className:(0,i.cn)("text-lg font-semibold text-foreground",e),...t}));C.displayName=g.hE.displayName,a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(g.VY,{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t})).displayName=g.VY.displayName;var P=r(15907),k=r(49656);let E=({imageUrl:e,name:t,price:r,quantity:a,details:n,disabled:o,onClickCountButton:l,onClickRemove:d,className:c})=>(0,s.jsxs)("div",{className:(0,i.cn)("flex bg-white p-5 gap-6",{"opacity-50 pointer-events-none":o},c),children:[(0,s.jsx)("img",{src:e,alt:t,className:"w-16 h-16 object-cover"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:t}),(0,s.jsx)("p",{className:"text-gray-500",children:n})]}),(0,s.jsx)("hr",{className:"my-3"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{onClick:()=>l&&l("minus"),className:(0,i.cn)("bg-gray-200 px-2 py-1 rounded cursor-pointer",{"opacity-50 pointer-events-none":1===a}),children:"-"}),(0,s.jsx)("span",{children:a}),(0,s.jsx)("div",{onClick:()=>l&&l("plus"),className:"bg-gray-200 px-2 py-1 rounded cursor-pointer",children:"+"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-gray-700",children:["₽ ",r.toFixed(2)]}),(0,s.jsx)("div",{onClick:d,className:"text-gray-400 cursor-pointer hover:text-gray-600",children:(0,s.jsx)(k.A,{size:16})})]})]})]})]});var U=r(15150),q=r(22403),R=r(91124);let $=[{name:"Маленькая",value:"20"},{name:"Средняя",value:"30"},{name:"Большая",value:"40"}],_=[{name:"Традиционное",value:"1"},{name:"Тонкое",value:"2"}],O=({children:e})=>{let{items:t,totalAmount:r,fetchCartItems:i,error:n,updateItemQuantity:o,removeCartItem:d}=(0,U.x)();if((0,a.useEffect)(()=>{i()},[i]),n)return(0,s.jsx)("div",{children:"Error loading cart items."});let c=e=>{let t=$?.find(t=>t.value===e.pizzaSize?.toString())?.name,r=_?.find(t=>t.value===e.type?.toString())?.name,a=e?.ingredients.map(e=>e?.name).join(", ");return(0,s.jsxs)(s.Fragment,{children:["Размер: ",t||"-",(0,s.jsx)("br",{}),"Тип теста: ",r||"-",(0,s.jsx)("br",{}),"Ингредиенты: ",a||"-"]})};return(0,s.jsxs)(v,{children:[(0,s.jsx)(j,{asChild:!0,children:e}),(0,s.jsxs)(z,{className:"flex flex-col justify-between",children:[(0,s.jsx)(I,{children:t.length>0&&(0,s.jsxs)(C,{children:["В корзине ",(0,s.jsxs)("span",{className:"font-bold",children:[t.length," товара"]})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===t.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,s.jsx)("p",{className:"text-lg text-neutral-500",children:"Корзина пуста"}),(0,s.jsx)(R.A,{className:"w-12 h-12 text-neutral-300 mt-4"})]}):t.map((e,t)=>(0,s.jsx)(E,{imageUrl:e.imageUrl,name:e.name,price:e.price,quantity:e.quantity,details:c(e),onClickCountButton:t=>{let r="plus"===t?e.quantity+1:e.quantity-1;o(e.id,r)},onClickRemove:async()=>{try{await d(e.id),q.Ay.success("Элемент успешно удален из корзины!")}catch(e){q.Ay.error("Удаление не удалось. Пожалуйста, повторите попытку.")}},className:"mb-4"},e.id))}),t.length>0&&(0,s.jsx)(A,{className:"-mx-6 bg-white p-8",children:(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex mb-4",children:[(0,s.jsxs)("span",{className:"flex flex-1 text-lg text-neutral-500",children:["Итого",(0,s.jsx)("div",{className:"flex-1 border-b border-dashed border-b-neutral-200 relative -top-1 mx-2"})]}),(0,s.jsxs)("span",{className:"font-bold text-lg",children:[r," ₽"]})]}),(0,s.jsx)(m(),{href:"/checkout",children:(0,s.jsxs)(l.$,{className:"w-full h-12 text-base",children:["Оформить заказ",(0,s.jsx)(P.A,{className:"w-5 ml-2"})]})})]})})]})]})},D=({className:e})=>(0,s.jsx)("div",{className:(0,i.cn)(e),children:(0,s.jsx)(O,{children:(0,s.jsx)(l.$,{variant:"outline",children:(0,s.jsx)(d.AsH,{})})})});var T=r(79334),H=r(90993);let L=({isOpen:e,onClose:t,children:r})=>e?(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,s.jsx)("button",{className:"absolute top-2 right-2",onClick:t,children:"\xd7"}),r]})}):null;var F=r(25409),K=r(6868),M=r(16131);let V=M.z.object({email:M.z.string().email({message:"Введите корректную почту"}),password:M.z.string().min(6,{message:"Введите корректный пароль"})}),Y=V.merge(M.z.object({confirmPassword:M.z.string().min(6,{message:"Введите корректный пароль"})})).refine(e=>e.password===e.confirmPassword,{message:"Пароли не совпадают",path:["confirmPassword"]});var B=r(81914),G=r(26248);let J=(0,G.createServerReference)("40eb6bcbc513061ec6f8213df1ba54ca5fb9a46eed",G.callServer,void 0,G.findSourceMapURL,"registerUser"),Q=({className:e,hasSearch:t=!0})=>{let r=(0,T.useRouter)(),c=(0,T.useSearchParams)(),{data:u}=(0,H.useSession)(),[p,h]=(0,a.useState)(!1),[x,g]=(0,a.useState)(!1),y=(0,K.mN)({resolver:(0,B.u)(V),defaultValues:{email:"",password:""}}),b=(0,K.mN)({resolver:(0,B.u)(Y),defaultValues:{email:"",password:"",confirmPassword:""}});(0,a.useEffect)(()=>{let e="";c.has("paid")&&(e="Заказ успешно оплачен! Информация отправлена на почту."),c.has("verified")&&(e="Почта успешно подтверждена!"),e&&setTimeout(()=>{r.replace("/"),q.Ay.success(e,{duration:3e3})},1e3)},[c,r]);let v=async e=>{try{let t=await (0,H.signIn)("credentials",{...e,redirect:!1});t?.error?q.Ay.error(t.error):h(!1)}catch(e){console.log(e),q.Ay.error("Ошибка при входе. Пожалуйста, попробуйте снова.")}},j=async e=>{try{await J({email:e.email,fullName:"Иван Иванов",password:e.password}),q.Ay.error("Регистрация успешна \uD83D\uDCDD. Подтвердите свою почту",{icon:"✅"})}catch(e){console.log(e),q.Ay.error("Ошибка при регистрации. Пожалуйста, попробуйте снова.")}};return(0,s.jsxs)("header",{className:(0,i.cn)("border border-b ",e),children:[(0,s.jsxs)(n,{className:"flex items-center justify-between py-8",children:[(0,s.jsx)(m(),{href:"/",children:(0,s.jsxs)("div",{className:"flex gap-2 cursor-pointer",children:[(0,s.jsx)(o.default,{src:"/img/Логотип.png",alt:"Logo Image",width:35,height:35}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl uppercase font-black",children:"Next Pizza"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 leading-3",children:"вкусней уже некуда"})]})]})}),t&&(0,s.jsx)(f,{}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsxs)(l.$,{variant:"outline",onClick:()=>{u?(0,H.signOut)():h(!0)},children:[(0,s.jsx)(d.x$1,{})," ",u?"Выйти":"Войти"]}),t&&(0,s.jsx)(D,{})]})]}),(0,s.jsx)(L,{isOpen:p,onClose:()=>h(!1),children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:x?"Регистрация":"Войти"}),(0,s.jsx)("p",{className:"mb-4",children:x?"Пожалуйста, зарегистрируйтесь.":"Пожалуйста, войдите в свою учетную запись."}),x?(0,s.jsxs)("form",{onSubmit:b.handleSubmit(j),children:[(0,s.jsx)(F.p,{placeholder:"Ваша почта...",className:"mb-2",type:"text",...b.register("email")}),b.formState.errors.email&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:b.formState.errors.email.message}),(0,s.jsx)(F.p,{placeholder:"Ваш пароль...",className:"mb-2",type:"password",...b.register("password")}),b.formState.errors.password&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:b.formState.errors.password.message}),(0,s.jsx)(F.p,{placeholder:"Подтвердите пароль...",className:"mb-2",type:"password",...b.register("confirmPassword")}),b.formState.errors.confirmPassword&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:b.formState.errors.confirmPassword.message}),(0,s.jsxs)(l.$,{className:"w-full mb-4 border border-[1px] flex items-center justify-center",onClick:()=>{(0,H.signIn)("google"),h(!1)},variant:"secondary",children:[(0,s.jsx)(d.DSS,{className:"mr-2"}),"Зарегистрироваться с помощью Google"]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)(l.$,{variant:"outline",onClick:()=>h(!1),children:"Отмена"}),(0,s.jsx)(l.$,{type:"submit",children:"Зарегистрироваться"})]})]}):(0,s.jsxs)("form",{onSubmit:y.handleSubmit(v),children:[(0,s.jsx)(F.p,{placeholder:"Ваша почта...",className:"mb-2",type:"text",...y.register("email")}),y.formState.errors.email&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:y.formState.errors.email.message}),(0,s.jsx)(F.p,{placeholder:"Ваш пароль...",className:"mb-2",type:"password",...y.register("password")}),y.formState.errors.password&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:y.formState.errors.password.message}),(0,s.jsxs)(l.$,{className:"w-full mb-4 border border-[1px] flex items-center justify-center",onClick:()=>{(0,H.signIn)("google"),h(!1)},variant:"secondary",children:[(0,s.jsx)(d.DSS,{className:"mr-2"}),"Войти с помощью Google"]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)(l.$,{variant:"outline",onClick:()=>h(!1),children:"Отмена"}),(0,s.jsx)(l.$,{type:"submit",children:"Войти"})]})]}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsx)(l.$,{variant:"link",onClick:()=>g(!x),children:x?"Уже есть аккаунт? Войти":"Нет аккаунта? Зарегистрироваться"})})]})})]})}},81445:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>n});var s=r(45512),a=r(90993);r(58009);var i=r(22403);let n=({children:e})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.SessionProvider,{children:e}),(0,s.jsx)(i.l$,{position:"top-center"})]})},15150:(e,t,r)=>{"use strict";r.d(t,{x:()=>l});var s=r(29466);let a=async()=>{try{return(await s.A.get("/cart")).data}catch(e){console.log("Error fetching data:",e)}},i=async(e,t)=>{try{return(await s.A.patch(`/cart/${e}`,{quantity:t})).data}catch(e){console.log("Error updating cart item quantity:",e)}},n=async e=>{try{return(await s.A.delete(`/cart/${e}`)).data}catch(e){console.log("Error removing cart item:",e)}},o=async(e,t)=>{try{return(await s.A.post("/cart",{productItemId:e,ingredients:t})).data}catch(e){console.log("Error adding item to cart:",e)}},l=(0,r(72803).v)((e,t)=>({items:[],error:!1,loading:!0,totalAmount:0,fetchCartItems:async()=>{try{e({loading:!0,error:!1});let t=(await a()).items.map(e=>{let t=e.ingredients.reduce((e,t)=>e+t.price,0),r=(e.productItem.price+t)*e.quantity;return{id:e.id,quantity:e.quantity,name:e.productItem.product.name,imageUrl:e.productItem.product.imageUrl,price:r,pizzaSize:e.productItem.size,type:e.productItem.pizzaType,ingredients:e.ingredients}}),r=t.reduce((e,t)=>e+t.price,0);e({items:t,totalAmount:r})}catch(t){console.log(t),e({error:!0})}finally{e({loading:!1})}},removeCartItem:async t=>{try{e({loading:!0,error:!1});let r=(await n(t.toString())).items.map(e=>{let t=e.ingredients.reduce((e,t)=>e+t.price,0),r=(e.productItem.price+t)*e.quantity;return{id:e.id,quantity:e.quantity,name:e.productItem.product.name,imageUrl:e.productItem.product.imageUrl,price:r,pizzaSize:e.productItem.size,type:e.productItem.pizzaType,ingredients:e.ingredients}}),s=r.reduce((e,t)=>e+t.price,0);e({items:r,totalAmount:s})}catch(t){console.log(t),e({error:!0})}finally{e({loading:!1})}},updateItemQuantity:async(t,r)=>{try{e({loading:!0,error:!1});let s=(await i(t.toString(),r)).items.map(e=>{let t=e.ingredients.reduce((e,t)=>e+t.price,0),r=(e.productItem.price+t)*e.quantity;return{id:e.id,quantity:e.quantity,name:e.productItem.product.name,imageUrl:e.productItem.product.imageUrl,price:r,pizzaSize:e.productItem.size,type:e.productItem.pizzaType,ingredients:e.ingredients}}),a=s.reduce((e,t)=>e+t.price,0);e({items:s,totalAmount:a})}catch(t){console.log(t),e({error:!0})}finally{e({loading:!1})}},addCartItem:async t=>{try{e({loading:!0,error:!1});let r=(await o(t.productItemId,t.ingredients)).items.map(e=>{let t=e.ingredients.reduce((e,t)=>e+t.price,0),r=(e.productItem.price+t)*e.quantity;return{id:e.id,quantity:e.quantity,name:e.productItem.product.name,imageUrl:e.productItem.product.imageUrl,price:r,pizzaSize:e.productItem.size,type:e.productItem.pizzaType,ingredients:e.ingredients}}),s=r.reduce((e,t)=>e+t.price,0);e({items:r,totalAmount:s})}catch(t){console.log(t),e({error:!0})}finally{e({loading:!1})}}}))},19611:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(62740),a=r(61441);r(82704);var i=r(33862),n=r.n(i);function o({children:e}){return(0,s.jsxs)("html",{lang:"en",children:[(0,s.jsx)("head",{children:(0,s.jsx)("link",{rel:"icon",href:"/img/Логотип.png"})}),(0,s.jsx)("body",{className:n().className,children:(0,s.jsx)(a.Providers,{children:e})})]})}},11324:(e,t,r)=>{"use strict";r.d(t,{Header:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call Header() from the server but Header is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\olya_\\OneDrive\\Desktop\\next-pizza\\shared\\Header.tsx","Header")},61441:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call Providers() from the server but Providers is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\olya_\\OneDrive\\Desktop\\next-pizza\\shared\\Proviers.tsx","Providers")},82704:()=>{}};